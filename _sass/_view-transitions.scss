/* ==========================================================================
   VIEW TRANSITIONS API
   ========================================================================== */

/**
 * View Transitions API Styles
 * Provides smooth page transitions with native browser support
 * 
 * Browser Support: Chrome 111+, Edge 111+, Safari (experimental)
 * Gracefully degrades for unsupported browsers
 */

@supports (view-transition-name: none) {
  /* Assign view-transition-name to key elements */
  #main {
    view-transition-name: main-content;
  }

  .masthead {
    view-transition-name: masthead;
  }

  .page__inner-wrap header h1 {
    view-transition-name: page-title;
  }

  .page__content {
    view-transition-name: page-content;
  }

  /* Archive page transitions */
  .archive {
    view-transition-name: archive-content;
  }

  /* Gallery page transitions */
  #gallery_main {
    view-transition-name: gallery-main;
  }

  /* Root transition styles */
  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation-duration: 0.3s;
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Main content transition */
  ::view-transition-old(main-content),
  ::view-transition-new(main-content) {
    animation-duration: 0.4s;
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Masthead transition - keep it stable */
  ::view-transition-old(masthead),
  ::view-transition-new(masthead) {
    animation-duration: 0.2s;
    animation-timing-function: ease-in-out;
  }

  /* Page title transition */
  ::view-transition-old(page-title),
  ::view-transition-new(page-title) {
    animation-duration: 0.35s;
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Page content transition */
  ::view-transition-old(page-content),
  ::view-transition-new(page-content) {
    animation-duration: 0.4s;
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Fade out old content */
  ::view-transition-old(root),
  ::view-transition-old(main-content),
  ::view-transition-old(page-title),
  ::view-transition-old(page-content) {
    animation-name: fade-out;
  }

  /* Fade in new content */
  ::view-transition-new(root),
  ::view-transition-new(main-content),
  ::view-transition-new(page-title),
  ::view-transition-new(page-content) {
    animation-name: fade-in;
  }

  /* Fade animations */
  @keyframes fade-out {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  /* Respect user's motion preferences */
  @media (prefers-reduced-motion: reduce) {
    ::view-transition-group(*),
    ::view-transition-old(*),
    ::view-transition-new(*) {
      animation-duration: 0.01ms !important;
      animation-delay: 0.01ms !important;
    }
  }

  /* Smooth transitions for gallery pages */
  ::view-transition-old(gallery-main),
  ::view-transition-new(gallery-main) {
    animation-duration: 0.5s;
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Archive/list page transitions */
  ::view-transition-old(archive-content),
  ::view-transition-new(archive-content) {
    animation-duration: 0.4s;
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }
}

